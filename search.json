[
  {
    "objectID": "pages/data_model/cdm_measurement.html",
    "href": "pages/data_model/cdm_measurement.html",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "The MEASUREMENT table contains records of Measurements, i.e. structured values (numerical or categorical) obtained through systematic and standardized examination or testing of a Person or Person’s sample. The MEASUREMENT table contains both orders and results of such Measurements as laboratory tests, vital signs, quantitative findings from pathology reports, etc. Measurements are stored as attribute value pairs, with the attribute as the Measurement Concept and the value representing the result. The value can be a Concept (stored in VALUE_AS_CONCEPT), or a numerical value (VALUE_AS_NUMBER) with a Unit (UNIT_CONCEPT_ID). The Procedure for obtaining the sample is housed in the PROCEDURE_OCCURRENCE table, though it is unnecessary to create a PROCEDURE_OCCURRENCE record for each measurement if one does not exist in the source data. Measurements differ from Observations in that they require a standardized test or some other activity to generate a quantitative or qualitative result. If there is no result, it is assumed that the lab test was conducted but the result was not captured.\n\n\n\n\n\n---\ntitle: OMOP.MEASUREMENT\n---\nerDiagram\n    MEASUREMENT {\n        measurement_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        measurement_concept_id integer \"[not null] standard OMOP concept id used for analyses\"\n        measurement_date date \"[not null]\"\n        measurement_datetime datetime\n        measurement_time timestamp\n        measurement_type_concept_id integer \"[not null] provenance of measurement value per OMOP\"\n        operator_concept_id integer \"omission here is equivalent to '='\"         \n        value_as_number float \"numerical value of the result of the measurement\"\n        value_as_concept_id integer \"standard concept result for categorical values in Meas Value domain\"\n        unit_concept_id integer\n        range_low float\n        range_high float\n        provider_id integer \"[FK] clinician provider who recorded condition\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[FK]\"\n        measurement_source_value varchar50 \"concept code as represented in source\"\n        measurement_source_concept_id integer \"source mapped to omop but often left empty\"\n        unit_source_value varchar50 \"verbatim unit given in source\"\n        unit_source_concept_id integer \"source unit mapped to omop\"\n        value_source_value varchar50 \"verbatim result value of the measurement in source\"\n        measurement_event_id integer \"link to a related record in the db\"\n        meas_event_field_concept_id integer \"concept id identifying the TABLE that is linked\"\n    }\n\n\n\n\n\n\n\n\n\nSILVER.MEASUREMENT is the cleaned and transformed version of tables and flowsheets that record laboratory values, that are used to stage vanilla OMOP CDM 5.4 tables (as well as other GOLD transformations). This table is wider than the OMOP data model, and includes the following differences:\n\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nSource concept codes/names are surfaced to enable direct visibility over semantic provenance;\nvalue_source_value is transformed and surfaced through operator_concept_name (direct visibility of any operators), value_as_number (OMOP - if clear numerical value), and value_as_categorical (for any string result, that does not necessarily map to OMOP)\nEach row holds information about a single concept relative to a single person. We can therefore incorporate additional, NHS-specific, information about table and systems provenance relative to source data. By extension, this allows for additional understanding of context of data generation, whereas it is often necessary to infer ‘OMOP measurement type’.\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but set as null, and remain empty when carried into OMOP.\n\n\n\n\n\n\n---\ntitle: SILVER.MEASUREMENT\n---\nerDiagram\n    MEASUREMENT {\n        measurement_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        measurement_concept_id integer \"[not null] standard OMOP concept id used for analyses\"\n        measurement_concept_code varchar50 \"[NEW] standard OMOP concept code\"\n        measurement_concept_name varcharMAX \"[NEW] standard OMOP concept name\"\n        measurement_concept_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the standard concept\"              \n        measurement_date date \"[not null]\"\n        measurement_datetime timestamp\n        measurement_time varchar10\n        measurement_type_concept_id integer \"[not null] provenance of measurement value per OMOP\"\n        operator_concept_id integer \"omission here is equivalent to '='\"\n        operator_concept_name varchar10 \"[NEW] explicit operator name for visibility\"         \n        value_as_number float \"numerical value of the result of the measurement\"\n        value_as_concept_id integer \"standard concept result for categorical values in Meas Value domain\"\n        value_as_categorical varchar255 \"[NEW] explicit categorical result for visibility\"        \n        unit_concept_id integer\n        unit_concept_name varchar255 \"[NEW] explicit unit name for visibility\"\n        range_low float  \"[set as null]\"\n        range_high float  \"[set as null]\"\n        provider_id integer  \"[set as null]\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[set as null]\"\n        measurement_source_value varchar50 \"concept code as represented in source\"\n        measurement_source_value_name varchar50 \"concept name as represented in source\"        \n        measurement_source_concept_id integer \"[set as null]\"\n        unit_source_value varchar50 \"verbatim unit given in source\"\n        unit_source_concept_id integer \"[set as null]\"\n        value_source_value varchar50 \"verbatim result value of the measurement in source\"\n        measurement_event_id integer \"link to a related record in the db\"\n        meas_event_field_concept_id integer \"concept id identifying the TABLE that is linked\"\n        source_system_provenance varchar50 \"[NEW] name of specific system from which source table was ingested\"\n        source_table_provenance varchar50 \"[NEW] source table name\"\n        source_row_id uuid \"[NEW] unique row id for the single concept that is generated at ingestion\"          \n    }\n\n\n\n\n\n\n\n\n\nNone for now!\n\n\n\nNone for now!\n\n\n\nJZ 2024-July-15: initial version, loaded original omop table and suggested SILVER model.",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/MEASUREMENT"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_measurement.html#measurement",
    "href": "pages/data_model/cdm_measurement.html#measurement",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "The MEASUREMENT table contains records of Measurements, i.e. structured values (numerical or categorical) obtained through systematic and standardized examination or testing of a Person or Person’s sample. The MEASUREMENT table contains both orders and results of such Measurements as laboratory tests, vital signs, quantitative findings from pathology reports, etc. Measurements are stored as attribute value pairs, with the attribute as the Measurement Concept and the value representing the result. The value can be a Concept (stored in VALUE_AS_CONCEPT), or a numerical value (VALUE_AS_NUMBER) with a Unit (UNIT_CONCEPT_ID). The Procedure for obtaining the sample is housed in the PROCEDURE_OCCURRENCE table, though it is unnecessary to create a PROCEDURE_OCCURRENCE record for each measurement if one does not exist in the source data. Measurements differ from Observations in that they require a standardized test or some other activity to generate a quantitative or qualitative result. If there is no result, it is assumed that the lab test was conducted but the result was not captured.\n\n\n\n\n\n---\ntitle: OMOP.MEASUREMENT\n---\nerDiagram\n    MEASUREMENT {\n        measurement_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        measurement_concept_id integer \"[not null] standard OMOP concept id used for analyses\"\n        measurement_date date \"[not null]\"\n        measurement_datetime datetime\n        measurement_time timestamp\n        measurement_type_concept_id integer \"[not null] provenance of measurement value per OMOP\"\n        operator_concept_id integer \"omission here is equivalent to '='\"         \n        value_as_number float \"numerical value of the result of the measurement\"\n        value_as_concept_id integer \"standard concept result for categorical values in Meas Value domain\"\n        unit_concept_id integer\n        range_low float\n        range_high float\n        provider_id integer \"[FK] clinician provider who recorded condition\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[FK]\"\n        measurement_source_value varchar50 \"concept code as represented in source\"\n        measurement_source_concept_id integer \"source mapped to omop but often left empty\"\n        unit_source_value varchar50 \"verbatim unit given in source\"\n        unit_source_concept_id integer \"source unit mapped to omop\"\n        value_source_value varchar50 \"verbatim result value of the measurement in source\"\n        measurement_event_id integer \"link to a related record in the db\"\n        meas_event_field_concept_id integer \"concept id identifying the TABLE that is linked\"\n    }\n\n\n\n\n\n\n\n\n\nSILVER.MEASUREMENT is the cleaned and transformed version of tables and flowsheets that record laboratory values, that are used to stage vanilla OMOP CDM 5.4 tables (as well as other GOLD transformations). This table is wider than the OMOP data model, and includes the following differences:\n\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nSource concept codes/names are surfaced to enable direct visibility over semantic provenance;\nvalue_source_value is transformed and surfaced through operator_concept_name (direct visibility of any operators), value_as_number (OMOP - if clear numerical value), and value_as_categorical (for any string result, that does not necessarily map to OMOP)\nEach row holds information about a single concept relative to a single person. We can therefore incorporate additional, NHS-specific, information about table and systems provenance relative to source data. By extension, this allows for additional understanding of context of data generation, whereas it is often necessary to infer ‘OMOP measurement type’.\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but set as null, and remain empty when carried into OMOP.\n\n\n\n\n\n\n---\ntitle: SILVER.MEASUREMENT\n---\nerDiagram\n    MEASUREMENT {\n        measurement_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        measurement_concept_id integer \"[not null] standard OMOP concept id used for analyses\"\n        measurement_concept_code varchar50 \"[NEW] standard OMOP concept code\"\n        measurement_concept_name varcharMAX \"[NEW] standard OMOP concept name\"\n        measurement_concept_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the standard concept\"              \n        measurement_date date \"[not null]\"\n        measurement_datetime timestamp\n        measurement_time varchar10\n        measurement_type_concept_id integer \"[not null] provenance of measurement value per OMOP\"\n        operator_concept_id integer \"omission here is equivalent to '='\"\n        operator_concept_name varchar10 \"[NEW] explicit operator name for visibility\"         \n        value_as_number float \"numerical value of the result of the measurement\"\n        value_as_concept_id integer \"standard concept result for categorical values in Meas Value domain\"\n        value_as_categorical varchar255 \"[NEW] explicit categorical result for visibility\"        \n        unit_concept_id integer\n        unit_concept_name varchar255 \"[NEW] explicit unit name for visibility\"\n        range_low float  \"[set as null]\"\n        range_high float  \"[set as null]\"\n        provider_id integer  \"[set as null]\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[set as null]\"\n        measurement_source_value varchar50 \"concept code as represented in source\"\n        measurement_source_value_name varchar50 \"concept name as represented in source\"        \n        measurement_source_concept_id integer \"[set as null]\"\n        unit_source_value varchar50 \"verbatim unit given in source\"\n        unit_source_concept_id integer \"[set as null]\"\n        value_source_value varchar50 \"verbatim result value of the measurement in source\"\n        measurement_event_id integer \"link to a related record in the db\"\n        meas_event_field_concept_id integer \"concept id identifying the TABLE that is linked\"\n        source_system_provenance varchar50 \"[NEW] name of specific system from which source table was ingested\"\n        source_table_provenance varchar50 \"[NEW] source table name\"\n        source_row_id uuid \"[NEW] unique row id for the single concept that is generated at ingestion\"          \n    }\n\n\n\n\n\n\n\n\n\nNone for now!\n\n\n\nNone for now!\n\n\n\nJZ 2024-July-15: initial version, loaded original omop table and suggested SILVER model.",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/MEASUREMENT"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_drug_exposure.html",
    "href": "pages/data_model/cdm_drug_exposure.html",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This table captures records about the exposure to a Drug ingested or otherwise introduced into the body. A Drug is a biochemical substance formulated in such a way that when administered to a Person it will exert a certain biochemical effect on the metabolism. Drugs include prescription and over-the-counter medicines, vaccines, and large-molecule biologic therapies. Radiological devices ingested or applied locally do not count as Drugs.\n\n\n\n\n\n---\ntitle: OMOP.DRUG_EXPOSURE\n---\nerDiagram\n    DRUG_EXPOSURE {\n        drug_exposure_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        drug_concept_id integer \"[not null] standard OMOP concept id used for analyses, contains strength/dose info\"\n        drug_exposure_start_date date \"[not null]\"\n        drug_exposure_start_datetime timestamp\n        drug_exposure_end_date date \"[not null]\"\n        drug_exposure_end_datetime timestamp\n        verbatim_end_date date\n        drug_type_concept_id integer \"[not null] e.g. prescriptions / dispensed / patient reported\"\n        stop_reason varchar20 \"reason for stopping as per source\"\n        refills integer\n        quantity float \"any numerical value for amount of drug\"\n        days_supply integer\n        sig varcharMAX \"verbatim instructions for drug\"\n        route_concept_id integer \"standard omop concept id in route domain\"\n        lot_number varchar50\n        provider_id integer \"[FK] clinician provider who recorded condition\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[FK]\"\n        drug_source_value varchar50 \"drug code as represented in source\"\n        drug_source_concept_id integer \"source mapped to omop but often left empty\"\n        route_source_value varchar50 \"verbatim route given in source\"\n        dose_unit_source_value varchar50 \"verbatim units given in source\"\n    }\n\n\n\n\n\n\n\n\n\nSILVER.DRUG_EXPOSURE is the cleaned and transformed version of ingested drug prescription, administration and/or dispensing tables, that are used to stage vanilla OMOP CDM 5.4 tables (as well as other GOLD transformations). This table is wider than the OMOP data model, and includes the following differences:\n\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nSource concept codes/names are surfaced to enable direct visibility over semantic provenance;\nDose information from source NHS inpatient drug adminstration systems (or ‘drug charts’) are difficult to represent unambiguously in OMOP. For example, OMOP quantity may contain ‘number of tablets’ OR ‘dose’ OR ‘total dosage given’. In the NHS, administration records found in drug charts are often a drug name (e.g. Paracetamol) and a dose (e.g. 1g) without any information about medication formulation or strength, which is the preferred information held in a standard OMOP concept. SILVER.DRUG_EXPOSURE therefore explicitly differentiates between item strength and quantity, and prescribed/administered dose.\nSILVER.DRUG_EXPOSURE also includes a column to indicate whether a prescribed dose was administered at the time, or if the dose was ‘not given’ at the prescribed time.\nEach row holds information about a single concept relative to a single person. We can therefore incorporate additional, NHS-specific, information about table and systems provenance relative to source data. By extension, this allows for additional understanding of context of data generation, whereas it is often necessary to infer ‘OMOP drug type’.\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but set as null, and remain empty when carried into OMOP.\n\n\n\n\n\n\n---\ntitle: SILVER.DRUG_EXPOSURE\n---\nerDiagram\n    DRUG_EXPOSURE {\n        drug_exposure_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        drug_concept_id integer \"[not null] standard OMOP concept id used for analyses, contains strength/dose info\"\n        drug_concept_code varchar50 \"[NEW] standard OMOP concept code\"\n        drug_concept_name varcharMAX \"[NEW] standard OMOP concept name\"\n        drug_concept_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the standard concept\"        \n        drug_exposure_start_date date \"[not null]\"\n        drug_exposure_start_datetime timestamp\n        drug_exposure_end_date date \"[not null]\"\n        drug_exposure_end_datetime timestamp\n        verbatim_end_date date \"[set as null]\"\n        drug_type_concept_id integer \"[not null] e.g. prescriptions / dispensed / patient reported\"\n        stop_reason varchar20 \"[set as null]\"\n        refills integer \"[set as null]\"\n        quantity float \"any numerical value for amount of drug\"\n        quantity_type varchar50 \"[NEW] indicates what type of quantity is indicated\"\n        quantity_unit varchar50 \"[NEW] clean version of unit for the quantity\"\n        dose_administration_flag varchar50 \"[NEW] for EPMA, indicates whether the drug was administered (yes/no/na)\"        \n        days_supply integer \"[set as null]\"\n        sig varcharMAX \"[set as null]\"\n        route_concept_id integer \"standard omop concept id in route domain\"\n        lot_number varchar50 \"[set as null]\"\n        provider_id integer \"[set as null]\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[set as null]\"\n        drug_source_value varchar50 \"drug code as represented in source\"\n        drug_source_value_name varcharMAX \"[NEW] drug name as represented in source\"        \n        drug_source_concept_id integer \"[set as null]\"\n        dose_source_value float \"[NEW] verbatim drug dose for each administration given in source\"\n        dose_unit_source_value varchar50 \"verbatim units given in source\"\n        route_source_value varchar50 \"verbatim route given in source\"\n        source_system_provenance varchar50 \"[NEW] name of specific system from which source table was ingested\"\n        source_table_provenance varchar50 \"[NEW] source table name\"\n        source_row_id varchar50 \"[NEW] unique row id for the single concept that is generated at ingestion\"        \n    }\n\n\n\n\n\n\n\n\n\nNone for now!\n\n\n\nNone for now!\n\n\n\nJZ 2024-July-15: initial version, loaded original omop table and suggested SILVER model.",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/DRUG_EXPOSURE"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_drug_exposure.html#drug_exposure",
    "href": "pages/data_model/cdm_drug_exposure.html#drug_exposure",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This table captures records about the exposure to a Drug ingested or otherwise introduced into the body. A Drug is a biochemical substance formulated in such a way that when administered to a Person it will exert a certain biochemical effect on the metabolism. Drugs include prescription and over-the-counter medicines, vaccines, and large-molecule biologic therapies. Radiological devices ingested or applied locally do not count as Drugs.\n\n\n\n\n\n---\ntitle: OMOP.DRUG_EXPOSURE\n---\nerDiagram\n    DRUG_EXPOSURE {\n        drug_exposure_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        drug_concept_id integer \"[not null] standard OMOP concept id used for analyses, contains strength/dose info\"\n        drug_exposure_start_date date \"[not null]\"\n        drug_exposure_start_datetime timestamp\n        drug_exposure_end_date date \"[not null]\"\n        drug_exposure_end_datetime timestamp\n        verbatim_end_date date\n        drug_type_concept_id integer \"[not null] e.g. prescriptions / dispensed / patient reported\"\n        stop_reason varchar20 \"reason for stopping as per source\"\n        refills integer\n        quantity float \"any numerical value for amount of drug\"\n        days_supply integer\n        sig varcharMAX \"verbatim instructions for drug\"\n        route_concept_id integer \"standard omop concept id in route domain\"\n        lot_number varchar50\n        provider_id integer \"[FK] clinician provider who recorded condition\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[FK]\"\n        drug_source_value varchar50 \"drug code as represented in source\"\n        drug_source_concept_id integer \"source mapped to omop but often left empty\"\n        route_source_value varchar50 \"verbatim route given in source\"\n        dose_unit_source_value varchar50 \"verbatim units given in source\"\n    }\n\n\n\n\n\n\n\n\n\nSILVER.DRUG_EXPOSURE is the cleaned and transformed version of ingested drug prescription, administration and/or dispensing tables, that are used to stage vanilla OMOP CDM 5.4 tables (as well as other GOLD transformations). This table is wider than the OMOP data model, and includes the following differences:\n\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nSource concept codes/names are surfaced to enable direct visibility over semantic provenance;\nDose information from source NHS inpatient drug adminstration systems (or ‘drug charts’) are difficult to represent unambiguously in OMOP. For example, OMOP quantity may contain ‘number of tablets’ OR ‘dose’ OR ‘total dosage given’. In the NHS, administration records found in drug charts are often a drug name (e.g. Paracetamol) and a dose (e.g. 1g) without any information about medication formulation or strength, which is the preferred information held in a standard OMOP concept. SILVER.DRUG_EXPOSURE therefore explicitly differentiates between item strength and quantity, and prescribed/administered dose.\nSILVER.DRUG_EXPOSURE also includes a column to indicate whether a prescribed dose was administered at the time, or if the dose was ‘not given’ at the prescribed time.\nEach row holds information about a single concept relative to a single person. We can therefore incorporate additional, NHS-specific, information about table and systems provenance relative to source data. By extension, this allows for additional understanding of context of data generation, whereas it is often necessary to infer ‘OMOP drug type’.\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but set as null, and remain empty when carried into OMOP.\n\n\n\n\n\n\n---\ntitle: SILVER.DRUG_EXPOSURE\n---\nerDiagram\n    DRUG_EXPOSURE {\n        drug_exposure_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        drug_concept_id integer \"[not null] standard OMOP concept id used for analyses, contains strength/dose info\"\n        drug_concept_code varchar50 \"[NEW] standard OMOP concept code\"\n        drug_concept_name varcharMAX \"[NEW] standard OMOP concept name\"\n        drug_concept_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the standard concept\"        \n        drug_exposure_start_date date \"[not null]\"\n        drug_exposure_start_datetime timestamp\n        drug_exposure_end_date date \"[not null]\"\n        drug_exposure_end_datetime timestamp\n        verbatim_end_date date \"[set as null]\"\n        drug_type_concept_id integer \"[not null] e.g. prescriptions / dispensed / patient reported\"\n        stop_reason varchar20 \"[set as null]\"\n        refills integer \"[set as null]\"\n        quantity float \"any numerical value for amount of drug\"\n        quantity_type varchar50 \"[NEW] indicates what type of quantity is indicated\"\n        quantity_unit varchar50 \"[NEW] clean version of unit for the quantity\"\n        dose_administration_flag varchar50 \"[NEW] for EPMA, indicates whether the drug was administered (yes/no/na)\"        \n        days_supply integer \"[set as null]\"\n        sig varcharMAX \"[set as null]\"\n        route_concept_id integer \"standard omop concept id in route domain\"\n        lot_number varchar50 \"[set as null]\"\n        provider_id integer \"[set as null]\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[set as null]\"\n        drug_source_value varchar50 \"drug code as represented in source\"\n        drug_source_value_name varcharMAX \"[NEW] drug name as represented in source\"        \n        drug_source_concept_id integer \"[set as null]\"\n        dose_source_value float \"[NEW] verbatim drug dose for each administration given in source\"\n        dose_unit_source_value varchar50 \"verbatim units given in source\"\n        route_source_value varchar50 \"verbatim route given in source\"\n        source_system_provenance varchar50 \"[NEW] name of specific system from which source table was ingested\"\n        source_table_provenance varchar50 \"[NEW] source table name\"\n        source_row_id varchar50 \"[NEW] unique row id for the single concept that is generated at ingestion\"        \n    }\n\n\n\n\n\n\n\n\n\nNone for now!\n\n\n\nNone for now!\n\n\n\nJZ 2024-July-15: initial version, loaded original omop table and suggested SILVER model.",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/DRUG_EXPOSURE"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_condition_occurrence.html",
    "href": "pages/data_model/cdm_condition_occurrence.html",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This table contains records of Events of a Person suggesting the presence of a disease or medical condition stated as a diagnosis, a sign, or a symptom, which is either observed by a Provider or reported by the patient.\n\n\n\n\n\n---\ntitle: OMOP.CONDITION_OCCURRENCE\n---\nerDiagram\n    CONDITION_OCCURRENCE {\n        condition_occurrence_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        condition_concept_id integer \"[not null] standard OMOP concept id used for analyses\"\n        condition_start_date date \"[not null]\"\n        condition_start_datetime timestamp\n        condition_end_date date\n        condition_end_datetime timestamp\n        condition_type_concept_id integer \"[not null] provenance of condition record per OMOP - see notes\"\n        condition_status_concept_id integer \"how diagnosis was made - e.g. admission vs final\"\n        stop_reason varchar20 \"why condition is no longer valid\"\n        provider_id integer \"[FK] clinician provider who recorded condition\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[FK]\"\n        condition_source_value varchar50 \"condition code as represented in source\"\n        condition_source_concept_id integer \"mapping to omop but often left empty\"\n        condition_status_source_value varchar50 \"condition status as represented in source\"\n    }\n\n\n\n\n\n\n\n\n\nSILVER.CONDITION_OCCURRENCE is the cleaned and transformed version of ingested condition tables, that are used to stage vanilla OMOP CDM 5.4 tables (as well as other GOLD transformations). This table is wider than the OMOP data model, and includes the following differences:\n\nIncludes an additional qualifier column to allow integration of ‘diagnosis order’ within NHS commissioning datasets;\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nSource concept codes/names are surfaced to enable direct visibility over semantic provenance;\nEach row holds information about a single concept relative to a single person. We can therefore incorporate additional, NHS-specific, information about table and systems provenance relative to source data. By extension, this allows for additional understanding of context of data generation, whereas it is often necessary to infer ‘OMOP condition status’.\n\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but set as null, and remain empty when carried into OMOP.\n\n\n\n\n\n\n---\ntitle: SILVER.CONDITION_OCCURRENCE\n---\nerDiagram\n    CONDITION_OCCURRENCE {\n        condition_occurrence_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        condition_concept_id integer \"[FK not null]\"\n        condition_concept_code varchar50 \"[NEW] standard OMOP concept code\"\n        condition_concept_name varcharMAX \"[NEW] standard OMOP concept name\"\n        condition_concept_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the standard concept\"\n        condition_diagnosis_order integer \"[NEW] for commissioning data only, the diagnosis order given in source\"\n        condition_start_date date \"[not null]\"\n        condition_start_datetime timestamp \"[set as null]\"\n        condition_end_date date\n        condition_end_datetime timestamp \"[set as null]\"\n        condition_type_concept_id integer \"[FK not null] categorisation through NHS systems - see notes\"\n        condition_status_concept_id integer \"[set as null]\"\n        stop_reason varchar20 \"[set as null]\"\n        provider_id integer \"[set as null]\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[set as null]\"      \n        condition_source_value varchar50 \"condition code as represented in source\"\n        condition_source_value_name varcharMAX \"[NEW] condition name as represented in source\"\n        condition_source_concept_id integer \"[set as null]\"          \n        condition_source_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the source concept\"\n        condition_status_source_value varchar50 \"[set as null]\"\n        source_system_provenance varchar50 \"[NEW] name of specific system from which source table was ingested\"\n        source_table_provenance varchar50 \"[NEW] source table name\"\n        source_row_id varchar50 \"[NEW] unique row id for the single concept that is generated at ingestion\"\n    }\n\n\n\n\n\n\n\n\n\nNone for now!\n\n\n\nNone for now!\n\n\n\nJZ 2024-June-29: initial version, loaded original omop table and suggested SILVER model.",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/CONDITION_OCCURRENCE"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_condition_occurrence.html#condition_occurrence",
    "href": "pages/data_model/cdm_condition_occurrence.html#condition_occurrence",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This table contains records of Events of a Person suggesting the presence of a disease or medical condition stated as a diagnosis, a sign, or a symptom, which is either observed by a Provider or reported by the patient.\n\n\n\n\n\n---\ntitle: OMOP.CONDITION_OCCURRENCE\n---\nerDiagram\n    CONDITION_OCCURRENCE {\n        condition_occurrence_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        condition_concept_id integer \"[not null] standard OMOP concept id used for analyses\"\n        condition_start_date date \"[not null]\"\n        condition_start_datetime timestamp\n        condition_end_date date\n        condition_end_datetime timestamp\n        condition_type_concept_id integer \"[not null] provenance of condition record per OMOP - see notes\"\n        condition_status_concept_id integer \"how diagnosis was made - e.g. admission vs final\"\n        stop_reason varchar20 \"why condition is no longer valid\"\n        provider_id integer \"[FK] clinician provider who recorded condition\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[FK]\"\n        condition_source_value varchar50 \"condition code as represented in source\"\n        condition_source_concept_id integer \"mapping to omop but often left empty\"\n        condition_status_source_value varchar50 \"condition status as represented in source\"\n    }\n\n\n\n\n\n\n\n\n\nSILVER.CONDITION_OCCURRENCE is the cleaned and transformed version of ingested condition tables, that are used to stage vanilla OMOP CDM 5.4 tables (as well as other GOLD transformations). This table is wider than the OMOP data model, and includes the following differences:\n\nIncludes an additional qualifier column to allow integration of ‘diagnosis order’ within NHS commissioning datasets;\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nSource concept codes/names are surfaced to enable direct visibility over semantic provenance;\nEach row holds information about a single concept relative to a single person. We can therefore incorporate additional, NHS-specific, information about table and systems provenance relative to source data. By extension, this allows for additional understanding of context of data generation, whereas it is often necessary to infer ‘OMOP condition status’.\n\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but set as null, and remain empty when carried into OMOP.\n\n\n\n\n\n\n---\ntitle: SILVER.CONDITION_OCCURRENCE\n---\nerDiagram\n    CONDITION_OCCURRENCE {\n        condition_occurrence_id integer \"[PK not null] autogenerated identifier\"\n        person_id integer \"[FK not null]\"\n        condition_concept_id integer \"[FK not null]\"\n        condition_concept_code varchar50 \"[NEW] standard OMOP concept code\"\n        condition_concept_name varcharMAX \"[NEW] standard OMOP concept name\"\n        condition_concept_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the standard concept\"\n        condition_diagnosis_order integer \"[NEW] for commissioning data only, the diagnosis order given in source\"\n        condition_start_date date \"[not null]\"\n        condition_start_datetime timestamp \"[set as null]\"\n        condition_end_date date\n        condition_end_datetime timestamp \"[set as null]\"\n        condition_type_concept_id integer \"[FK not null] categorisation through NHS systems - see notes\"\n        condition_status_concept_id integer \"[set as null]\"\n        stop_reason varchar20 \"[set as null]\"\n        provider_id integer \"[set as null]\"\n        visit_occurrence_id integer \"[FK]\"\n        visit_detail_id integer \"[set as null]\"      \n        condition_source_value varchar50 \"condition code as represented in source\"\n        condition_source_value_name varcharMAX \"[NEW] condition name as represented in source\"\n        condition_source_concept_id integer \"[set as null]\"          \n        condition_source_vocabulary_id varchar20 \"[FK NEW] OMOP vocabulary id representing the source concept\"\n        condition_status_source_value varchar50 \"[set as null]\"\n        source_system_provenance varchar50 \"[NEW] name of specific system from which source table was ingested\"\n        source_table_provenance varchar50 \"[NEW] source table name\"\n        source_row_id varchar50 \"[NEW] unique row id for the single concept that is generated at ingestion\"\n    }\n\n\n\n\n\n\n\n\n\nNone for now!\n\n\n\nNone for now!\n\n\n\nJZ 2024-June-29: initial version, loaded original omop table and suggested SILVER model.",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/CONDITION_OCCURRENCE"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "London SDE/AIC Docs",
    "section": "",
    "text": "Technical documentation for work in London SDE/AIC Programme\n[Placeholder]",
    "crumbs": [
      "MAIN",
      "Home"
    ]
  },
  {
    "objectID": "pages/data_pipeline/intro.html",
    "href": "pages/data_pipeline/intro.html",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This section describes the architecture of our hospital data pipelines.\n\n\n\n\n\n%%{init: {'theme': 'neutral' } }%%\n  flowchart LR\n\n    A[\"SOURCE\"]--\"Batch/stream to landing zone \n                    and load to database\"--&gt;B[\"BRONZE\"]--\"Standardise structure \n                                                          and concepts\"--&gt;C[\"SILVER\"]--\"OMOP conversion and\n                                                                                        analytics mart creation\"--&gt;D[\"GOLD\"]\n\n\n\n\n\n\n[placeholder]",
    "crumbs": [
      "DATA PIPELINE",
      "Intro to Pipeline"
    ]
  },
  {
    "objectID": "pages/data_pipeline/intro.html#introduction",
    "href": "pages/data_pipeline/intro.html#introduction",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This section describes the architecture of our hospital data pipelines.\n\n\n\n\n\n%%{init: {'theme': 'neutral' } }%%\n  flowchart LR\n\n    A[\"SOURCE\"]--\"Batch/stream to landing zone \n                    and load to database\"--&gt;B[\"BRONZE\"]--\"Standardise structure \n                                                          and concepts\"--&gt;C[\"SILVER\"]--\"OMOP conversion and\n                                                                                        analytics mart creation\"--&gt;D[\"GOLD\"]\n\n\n\n\n\n\n[placeholder]",
    "crumbs": [
      "DATA PIPELINE",
      "Intro to Pipeline"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_person.html",
    "href": "pages/data_model/cdm_person.html",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "Structured data sources for person and core demographic information will generally always include:\n\n\n\nTable\nType\n\n\n\n\nCommissioning Datasets\nLegacy\n\n\nPatient Information Management Systems\nLegacy\n\n\nElectronic Health Record patient index\nLive / ADT feed\n\n\nIndividual Observations / Facts\nLegacy + Live\n\n\n\nTables are loaded to the database in batches, or through incremental ingestion via connection to a source database.\n\n\n\nEach data source is first staged in stg_{source}__{entity}. This may include column renaming, SELECT and UNION statements, and edge case handling.\n\n\n\nDue to the large number of patient identification systems found in any hospital, and the possibility of patient ID duplication (and subsequent deduplication), we normalise all identifiers (including hospital IDs, NHS numbers, specific system IDs) under a person_uuid that we generate. Note that while NHS numbers are often seen as a canonical identifier, these exhibit significant missingness either due to failure to retrieve from NHS Spine, or because a patient is not registered in the NHS.\n\n\n\n\n\n---\ntitle: Person Identifier Lookup Table\n---\nerDiagram\n    int_person_identifier_lookup {\n        person_uuid uuid \"generated for each unique person\"\n        patient_id varchar \"patient identifier from source systems\"\n        patient_id_type varchar \"type of patient identifier\"\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        valid_from date \"date of record creation\"\n        valid_to date \"date of record deprecation (e.g. if lookup no longer valid)\"\n    }\n\n\n\n\n\n\n\n\n\nThe source tables which contain patient demographics are a combination of normalised tables, and flat / wide tables, and may be maintained as type 1 or 2 SCD. We normalise patient characteristics found in these tables to enable visibility over changing and/or conflicting information (data handling decisions are pushed to a later stage).\nNormalised tables handle core characteristics, that we treat as patient dimensions.\n\n\n\n\n\n---\ntitle: Person Intermediate Tables\n---\nerDiagram\n    int_person_birth {\n        person_uuid uuid \"[PK] generated for each unique person\"\n        year_of_birth integer \"[not null]\"\n        month_of_birth integer\n        day_of_birth integer\n        birth_datetime timestamp\n        source_table_provenance varchar50 \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n    }\n    int_person_birth ||--|{ int_person_gender : \"has gender\"\n    int_person_gender {\n        person_uuid uuid \"[FK] int_person_birth\"\n        gender_source_value varchar \"gender code from source system\"\n        gender_source_value_name varchar \"gender descriptive name from source system\"        \n        gender_type varchar \"type of gender (e.g. Epic - phenotypic)\"\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        date_valid date \"date of record creation\"\n        date_invalid date \"date of record deprecation (e.g. if data item no longer valid)\"\n    }\n    int_person_birth ||--|{ int_person_ethnicity : \"has ethnicity\"\n    int_person_ethnicity {\n        person_uuid uuid \"[FK] int_person_birth\"\n        ethnicity_source_value varchar20 \"ethnicity code from source system\"\n        ethnicity_source_value_name varchar20 \"ethnicity descriptive name from source system\"        \n        source_table_provenance varchar50 \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        date_valid date \"date of record creation\"\n        date_invalid date \"date of record deprecation (e.g. if data item no longer valid)\"\n    }\n\n\n\n\n\n\n\n\n\nDeprivation is derived from patient postcode. The remaining parts of address are discarded.\n\n\n\n\n\n---\ntitle: Person Intermediate Table (Deprivation)\n---\nerDiagram\n    int_person_birth {\n        person_uuid uuid \"[PK] generated for each unique person\"\n        year_of_birth integer \"[not null]\"\n        month_of_birth integer\n        day_of_birth integer\n        birth_datetime timestamp\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n    }\n    int_person_birth ||--|{ int_person_deprivation : \"has deprivation\"\n        int_person_deprivation {\n        person_uuid uuid \"[FK] int_person_birth\"\n        postcode varchar \"postcode with space\"\n        deprivation_decile integer \"derived from postcode lookup\"        \n        index_multiple_deprivation integer \"ranked IMD from postcode lookup\"\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        valid_from date \"date of record creation\"\n        valid_to date \"date of record deprecation (e.g. if data item no longer valid)\"\n    }\n\n\n\n\n\n\n\n\n\nThis is the transformed version of ingested person and demographic tables. This table is wider than the OMOP data model can be further constrained to transform into vanilla OMOP. It contains the following differences from OMOP:\n\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nAdditional demographic fields for UK specific deprivation are included;\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but we do not populate. They remain empty when carried into omop.person;\nTo populate this, logic is applied to surface the most recent and reliable dimensions based on intermediate tables.\n\n\n\n\n\n\n---\ntitle: OMOP-EXT Person\n---\nerDiagram\n    mrt_person {\n        person_uuid uuid \"[PK] generated for each unique person\"\n        gender_concept_id integer \"[OMOP, not null] standard omop concept\"\n        gender_concept_code varchar \"standard concept code\"\n        gender_concept_name varchar \"standard concept name\"\n        year_of_birth integer \"[OMOP, not null]\"\n        month_of_birth integer \"[OMOP]\"\n        day_of_birth integer \"[OMOP]\"\n        birth_datetime timestamp \"[OMOP]\"\n        race_concept_id integer \"[OMOP, not null] ethnicity in NHS\"\n        race_concept_code varchar \"standard concept code\"\n        race_concept_name varchar \"standard concept name\"\n        deprivation_decile_as_number integer \"NHS IMD decile\"       \n        deprivation_index_as_number integer \"NHS IMD ranking\"\n        ethnicity_concept_id integer \"[OMOP] we do not populate this\"\n        location_id integer \"[OMOP] we do not populate this\"\n        provider_id integer \"[OMOP] we do not populate this\"\n        care_site_id integer \"[OMOP] we do not populate this\"\n        person_source_value varchar \"[OMOP] contains nhs number where available\"\n        gender_source_value varchar \"[OMOP]\"\n        gender_source_concept_id integer \"[OMOP]\"\n        race_source_value varchar \"[OMOP]\"\n        race_source_concept_id integer \"[OMOP]\"\n        ethnicity_source_value varchar \"[OMOP] we do not populate this\"\n        ethnicity_source_concept_id integer \"[OMOP] we do not populate this\"   \n    }\n\n\n\n\n\n\n\n\n\nCentral identity management for all persons in the OMOP data model. It contains records that uniquely identify each person or patient, and some demographic information.\n\n\n\n\n\n---\ntitle: OMOP Person Table\n---\nerDiagram\n    person {\n        person_id integer \"[PK not null]\"\n        gender_concept_id integer \"[not null]\"\n        year_of_birth integer \"[not null]\"\n        month_of_birth integer\n        day_of_birth integer\n        birth_datetime timestamp\n        race_concept_id integer \"[not null] race or ethnicity\"\n        ethnicity_concept_id integer \"[not null] US-specific hispanic vs non-hispanic\"\n        location_id integer \"patient physical address\"\n        provider_id integer \"GP who is primary care provider\"\n        care_site_id integer \"GP surgery for primary care\"\n        person_source_value varchar50 \"nhs number where available\"\n        gender_source_value varchar50 \"biological sex as represented in source\"\n        gender_source_concept_id integer \"mapping to omop, but often empty\"\n        race_source_value varchar50 \"race or ethnicity as represented in source\"\n        race_source_concept_id integer \"mapping to omop, but often empty\"\n        ethnicity_source_value varchar50 \"US-specific as represented in source\"\n        ethnicity_source_concept_id integer \"mapping to omop, but often empty\"\n    }",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/PERSON"
    ]
  },
  {
    "objectID": "pages/data_model/cdm_person.html#person",
    "href": "pages/data_model/cdm_person.html#person",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "Structured data sources for person and core demographic information will generally always include:\n\n\n\nTable\nType\n\n\n\n\nCommissioning Datasets\nLegacy\n\n\nPatient Information Management Systems\nLegacy\n\n\nElectronic Health Record patient index\nLive / ADT feed\n\n\nIndividual Observations / Facts\nLegacy + Live\n\n\n\nTables are loaded to the database in batches, or through incremental ingestion via connection to a source database.\n\n\n\nEach data source is first staged in stg_{source}__{entity}. This may include column renaming, SELECT and UNION statements, and edge case handling.\n\n\n\nDue to the large number of patient identification systems found in any hospital, and the possibility of patient ID duplication (and subsequent deduplication), we normalise all identifiers (including hospital IDs, NHS numbers, specific system IDs) under a person_uuid that we generate. Note that while NHS numbers are often seen as a canonical identifier, these exhibit significant missingness either due to failure to retrieve from NHS Spine, or because a patient is not registered in the NHS.\n\n\n\n\n\n---\ntitle: Person Identifier Lookup Table\n---\nerDiagram\n    int_person_identifier_lookup {\n        person_uuid uuid \"generated for each unique person\"\n        patient_id varchar \"patient identifier from source systems\"\n        patient_id_type varchar \"type of patient identifier\"\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        valid_from date \"date of record creation\"\n        valid_to date \"date of record deprecation (e.g. if lookup no longer valid)\"\n    }\n\n\n\n\n\n\n\n\n\nThe source tables which contain patient demographics are a combination of normalised tables, and flat / wide tables, and may be maintained as type 1 or 2 SCD. We normalise patient characteristics found in these tables to enable visibility over changing and/or conflicting information (data handling decisions are pushed to a later stage).\nNormalised tables handle core characteristics, that we treat as patient dimensions.\n\n\n\n\n\n---\ntitle: Person Intermediate Tables\n---\nerDiagram\n    int_person_birth {\n        person_uuid uuid \"[PK] generated for each unique person\"\n        year_of_birth integer \"[not null]\"\n        month_of_birth integer\n        day_of_birth integer\n        birth_datetime timestamp\n        source_table_provenance varchar50 \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n    }\n    int_person_birth ||--|{ int_person_gender : \"has gender\"\n    int_person_gender {\n        person_uuid uuid \"[FK] int_person_birth\"\n        gender_source_value varchar \"gender code from source system\"\n        gender_source_value_name varchar \"gender descriptive name from source system\"        \n        gender_type varchar \"type of gender (e.g. Epic - phenotypic)\"\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        date_valid date \"date of record creation\"\n        date_invalid date \"date of record deprecation (e.g. if data item no longer valid)\"\n    }\n    int_person_birth ||--|{ int_person_ethnicity : \"has ethnicity\"\n    int_person_ethnicity {\n        person_uuid uuid \"[FK] int_person_birth\"\n        ethnicity_source_value varchar20 \"ethnicity code from source system\"\n        ethnicity_source_value_name varchar20 \"ethnicity descriptive name from source system\"        \n        source_table_provenance varchar50 \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        date_valid date \"date of record creation\"\n        date_invalid date \"date of record deprecation (e.g. if data item no longer valid)\"\n    }\n\n\n\n\n\n\n\n\n\nDeprivation is derived from patient postcode. The remaining parts of address are discarded.\n\n\n\n\n\n---\ntitle: Person Intermediate Table (Deprivation)\n---\nerDiagram\n    int_person_birth {\n        person_uuid uuid \"[PK] generated for each unique person\"\n        year_of_birth integer \"[not null]\"\n        month_of_birth integer\n        day_of_birth integer\n        birth_datetime timestamp\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n    }\n    int_person_birth ||--|{ int_person_deprivation : \"has deprivation\"\n        int_person_deprivation {\n        person_uuid uuid \"[FK] int_person_birth\"\n        postcode varchar \"postcode with space\"\n        deprivation_decile integer \"derived from postcode lookup\"        \n        index_multiple_deprivation integer \"ranked IMD from postcode lookup\"\n        source_table_provenance varchar \"source table name\"\n        source_row_id uuid \"unique row id for the single concept that is generated at ingestion\"\n        valid_from date \"date of record creation\"\n        valid_to date \"date of record deprecation (e.g. if data item no longer valid)\"\n    }\n\n\n\n\n\n\n\n\n\nThis is the transformed version of ingested person and demographic tables. This table is wider than the OMOP data model can be further constrained to transform into vanilla OMOP. It contains the following differences from OMOP:\n\nStandardised concept codes/names are surfaced, and indexed, to enable user-friendly exploration and visualisation without the need for large joins;\nAdditional demographic fields for UK specific deprivation are included;\nOMOP CDM 5.4 columns that are not relevant to the NHS, or to intended purposes, are initialised, but we do not populate. They remain empty when carried into omop.person;\nTo populate this, logic is applied to surface the most recent and reliable dimensions based on intermediate tables.\n\n\n\n\n\n\n---\ntitle: OMOP-EXT Person\n---\nerDiagram\n    mrt_person {\n        person_uuid uuid \"[PK] generated for each unique person\"\n        gender_concept_id integer \"[OMOP, not null] standard omop concept\"\n        gender_concept_code varchar \"standard concept code\"\n        gender_concept_name varchar \"standard concept name\"\n        year_of_birth integer \"[OMOP, not null]\"\n        month_of_birth integer \"[OMOP]\"\n        day_of_birth integer \"[OMOP]\"\n        birth_datetime timestamp \"[OMOP]\"\n        race_concept_id integer \"[OMOP, not null] ethnicity in NHS\"\n        race_concept_code varchar \"standard concept code\"\n        race_concept_name varchar \"standard concept name\"\n        deprivation_decile_as_number integer \"NHS IMD decile\"       \n        deprivation_index_as_number integer \"NHS IMD ranking\"\n        ethnicity_concept_id integer \"[OMOP] we do not populate this\"\n        location_id integer \"[OMOP] we do not populate this\"\n        provider_id integer \"[OMOP] we do not populate this\"\n        care_site_id integer \"[OMOP] we do not populate this\"\n        person_source_value varchar \"[OMOP] contains nhs number where available\"\n        gender_source_value varchar \"[OMOP]\"\n        gender_source_concept_id integer \"[OMOP]\"\n        race_source_value varchar \"[OMOP]\"\n        race_source_concept_id integer \"[OMOP]\"\n        ethnicity_source_value varchar \"[OMOP] we do not populate this\"\n        ethnicity_source_concept_id integer \"[OMOP] we do not populate this\"   \n    }\n\n\n\n\n\n\n\n\n\nCentral identity management for all persons in the OMOP data model. It contains records that uniquely identify each person or patient, and some demographic information.\n\n\n\n\n\n---\ntitle: OMOP Person Table\n---\nerDiagram\n    person {\n        person_id integer \"[PK not null]\"\n        gender_concept_id integer \"[not null]\"\n        year_of_birth integer \"[not null]\"\n        month_of_birth integer\n        day_of_birth integer\n        birth_datetime timestamp\n        race_concept_id integer \"[not null] race or ethnicity\"\n        ethnicity_concept_id integer \"[not null] US-specific hispanic vs non-hispanic\"\n        location_id integer \"patient physical address\"\n        provider_id integer \"GP who is primary care provider\"\n        care_site_id integer \"GP surgery for primary care\"\n        person_source_value varchar50 \"nhs number where available\"\n        gender_source_value varchar50 \"biological sex as represented in source\"\n        gender_source_concept_id integer \"mapping to omop, but often empty\"\n        race_source_value varchar50 \"race or ethnicity as represented in source\"\n        race_source_concept_id integer \"mapping to omop, but often empty\"\n        ethnicity_source_value varchar50 \"US-specific as represented in source\"\n        ethnicity_source_concept_id integer \"mapping to omop, but often empty\"\n    }",
    "crumbs": [
      "COMMON DATA MODEL",
      "Table/PERSON"
    ]
  },
  {
    "objectID": "pages/data_model/intro.html",
    "href": "pages/data_model/intro.html",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This section explains how we model clinical data across our partner hospitals.\n\n\nNHS hospitals generate vast amounts of electronic data, but it’s often unsuitable for immediate analytics or research due to normalisation, transactional design, and inconsistencies across systems. To unify data from various sources, it must be transformed into a Common Data Model (CDM). Extensive transformation risks changing meaning or introducing errors, potentially impacting research outcomes or patient care decisions. This is particularly critical for high-stakes applications like regulatory drug assessments or AI model training for precision medicine. Consequently, we follow strict guidelines to maintain data integrity and trustworthiness throughout our pipelines:\n\n\n\n\n\n\nAvoid information loss\n\n\n\nFor a given domain of interest, the target data model should not result in any relevant information being discarded.\n\n\n\n\n\n\n\n\nContinuously enrich with metadata\n\n\n\nInformation should be added to enrich contextual understanding of each data item, which can be surfaced to inform analytical decisions.\n\n\n\n\n\n\n\n\nKeep data provenance visible\n\n\n\nEach value or concept, even after transformations, should be traceable back to the source system/table where it was originally generated.\n\n\n\n\n\n\n\n\nConsider source systems and context as part of the data pipeline\n\n\n\nSource systems and context affect the meaning of data, and while they fall outside control or assurance of engineers, they must be comprehensively documented for data to be interpretable during analysis.\n\n\n\n\n\n\n\n\nKeep data lineage traceable back to source\n\n\n\nThis includes any transformations to numerical values or concepts, and is essential for trust in standardised data. Transformed data should be easily comparable to its source appearance.\n\n\n\n\n\n\n\n\nMake ‘research-ready’ only for each use-case\n\n\n\nData is kept close to source while being made interoperable, and more extensive transformations are performed only on the basis of study requirements. In particular, handling of data quality issues should be a decision made at analysis, dependant on type of analysis.\n\n\nThese guidelines ensure that data is kept as close to its original form for as long as possible, whilst creating syntactic and semantic standardisation, and introducing full visibility over sources and transformations.\n\n\n\nThe Observational Medical Outcomes Partnership (OMOP) Common Data Model (CDM) standardises medical data for large-scale analytics and cross-site research. It organizes data into standardised tables and uses consistent vocabulary, enabling syntactic and semantic interoperability, with key advantages:\n\n\n\n\n\n\n1. International standard: wide adoption and support has made OMOP the de facto international standard common data model for research\n\n\n2. Reproducibility: easier code-sharing and reproduction of research findings across different datasets\n\n\n3. Federated analytics: the same code can be directly executed without modification across different sites, with results combined\n\n\n\n\n\n\nOMOP CDM 5.4\n\n\nHowever, OMOP also has limitations:\n\n\n\n\n\n\n1. Data model is USA-centric and has elements that are not applicable to other countries, e.g. representation of race and ethnicity\n\n\n2. Standard vocabulary may not capture how standard ontologies are used and updated in other countries, e.g. NHS/UK SNOMED extensions and use of dm+d\n\n\n3. Rigid structure means there is potential information loss during conversion where data, especially of variable quality, must be ‘forced’ into the model\n\n\n4. Different interpretations of how to convert (e.g. choice of source systems, local mappings) may result in OMOP at different sites having varying meaning, unless precise conventions for a particular cohort are agreed in advance\n\n\n5. Limited number of fields prevents additional data types or complex medical concepts, e.g. NHS specific qualifiers, and makes it difficult to incorporate new types of data or emerging medical concepts such as genomics and cancer, without workarounds\n\n\n6. Representing complex temporal relationships and hierarchical/nested episodes, e.g. cancer pathways, is challenging\n\n\n7. Limited ability for capturing data provenance, and USA-centric source system classification\n\n\n8. OMOP is not able to handle dimensions of patients that change over time, without using workarounds\n\n\n\nFor our work, OMOP serves as a target model for specific cohorts that require interoperable data across multiple sites (i.e. a data mart / GOLD layer in a medallion architecture). However, due to its limitations, OMOP breaks our data modelling guidelines and is not used as a primary CDM. Rather, we adopt a wider data model, which we refer to as OMOP Extended (OMOP-EXT CDM), serving as the SILVER layer.\n\n\n\nOMOP-EXT is made to be compatible with OMOP, but adds additional columns for greater semantic capture, and better localisation. Compatibility is defined as the following:\n\n\n\n\n\n\n1. All concepts are mapped to concepts recognised by the OMOP vocabulary, and to OMOP standard concepts whereever possible. Semantic layer uses OMOP defined concept IDs as primary keys\n\n\n2. Fields from OMOP CDM are included as part of OMOP-EXT whereever there is information routinely available to populate them. Fields are used identically to OMOP CDM\n\n\n3. No additional fields are introduced if similar fields or functions already exist in OMOP CDM\n\n\n\nThe resulting SILVER stage is designed to be ‘one transformation step’ away from OMOP GOLD tables, where decisions on patient inclusion and data cleaning are executed.\n\n\n\nOMOP provides different ways for representing provenance. These include using concepts that represent the type of data source, and concepts that represent the concept status. “Type” is USA-centric and does not carry granularity to represent the specific types of NHS system (though NHS systems can be mapped to these categories). Concept status is specific to the context in which each condition code was recorded. In practice, this type of metadata is rarely present in NHS source data, and would usually be inferred by the source system.\nIn the Common Data Model, SILVER tables therefore include additional columns to enable visibility over the source table, and NHS source system, and the direct relationship to a row in a source table via a unique source_row_id that is generated at data load. This also enables direct visbility over changes made during transformation.\n\n\n\n[placeholder]",
    "crumbs": [
      "COMMON DATA MODEL",
      "Intro to CDM"
    ]
  },
  {
    "objectID": "pages/data_model/intro.html#introduction",
    "href": "pages/data_model/intro.html#introduction",
    "title": "London SDE/AIC Technical Documentation",
    "section": "",
    "text": "This section explains how we model clinical data across our partner hospitals.\n\n\nNHS hospitals generate vast amounts of electronic data, but it’s often unsuitable for immediate analytics or research due to normalisation, transactional design, and inconsistencies across systems. To unify data from various sources, it must be transformed into a Common Data Model (CDM). Extensive transformation risks changing meaning or introducing errors, potentially impacting research outcomes or patient care decisions. This is particularly critical for high-stakes applications like regulatory drug assessments or AI model training for precision medicine. Consequently, we follow strict guidelines to maintain data integrity and trustworthiness throughout our pipelines:\n\n\n\n\n\n\nAvoid information loss\n\n\n\nFor a given domain of interest, the target data model should not result in any relevant information being discarded.\n\n\n\n\n\n\n\n\nContinuously enrich with metadata\n\n\n\nInformation should be added to enrich contextual understanding of each data item, which can be surfaced to inform analytical decisions.\n\n\n\n\n\n\n\n\nKeep data provenance visible\n\n\n\nEach value or concept, even after transformations, should be traceable back to the source system/table where it was originally generated.\n\n\n\n\n\n\n\n\nConsider source systems and context as part of the data pipeline\n\n\n\nSource systems and context affect the meaning of data, and while they fall outside control or assurance of engineers, they must be comprehensively documented for data to be interpretable during analysis.\n\n\n\n\n\n\n\n\nKeep data lineage traceable back to source\n\n\n\nThis includes any transformations to numerical values or concepts, and is essential for trust in standardised data. Transformed data should be easily comparable to its source appearance.\n\n\n\n\n\n\n\n\nMake ‘research-ready’ only for each use-case\n\n\n\nData is kept close to source while being made interoperable, and more extensive transformations are performed only on the basis of study requirements. In particular, handling of data quality issues should be a decision made at analysis, dependant on type of analysis.\n\n\nThese guidelines ensure that data is kept as close to its original form for as long as possible, whilst creating syntactic and semantic standardisation, and introducing full visibility over sources and transformations.\n\n\n\nThe Observational Medical Outcomes Partnership (OMOP) Common Data Model (CDM) standardises medical data for large-scale analytics and cross-site research. It organizes data into standardised tables and uses consistent vocabulary, enabling syntactic and semantic interoperability, with key advantages:\n\n\n\n\n\n\n1. International standard: wide adoption and support has made OMOP the de facto international standard common data model for research\n\n\n2. Reproducibility: easier code-sharing and reproduction of research findings across different datasets\n\n\n3. Federated analytics: the same code can be directly executed without modification across different sites, with results combined\n\n\n\n\n\n\nOMOP CDM 5.4\n\n\nHowever, OMOP also has limitations:\n\n\n\n\n\n\n1. Data model is USA-centric and has elements that are not applicable to other countries, e.g. representation of race and ethnicity\n\n\n2. Standard vocabulary may not capture how standard ontologies are used and updated in other countries, e.g. NHS/UK SNOMED extensions and use of dm+d\n\n\n3. Rigid structure means there is potential information loss during conversion where data, especially of variable quality, must be ‘forced’ into the model\n\n\n4. Different interpretations of how to convert (e.g. choice of source systems, local mappings) may result in OMOP at different sites having varying meaning, unless precise conventions for a particular cohort are agreed in advance\n\n\n5. Limited number of fields prevents additional data types or complex medical concepts, e.g. NHS specific qualifiers, and makes it difficult to incorporate new types of data or emerging medical concepts such as genomics and cancer, without workarounds\n\n\n6. Representing complex temporal relationships and hierarchical/nested episodes, e.g. cancer pathways, is challenging\n\n\n7. Limited ability for capturing data provenance, and USA-centric source system classification\n\n\n8. OMOP is not able to handle dimensions of patients that change over time, without using workarounds\n\n\n\nFor our work, OMOP serves as a target model for specific cohorts that require interoperable data across multiple sites (i.e. a data mart / GOLD layer in a medallion architecture). However, due to its limitations, OMOP breaks our data modelling guidelines and is not used as a primary CDM. Rather, we adopt a wider data model, which we refer to as OMOP Extended (OMOP-EXT CDM), serving as the SILVER layer.\n\n\n\nOMOP-EXT is made to be compatible with OMOP, but adds additional columns for greater semantic capture, and better localisation. Compatibility is defined as the following:\n\n\n\n\n\n\n1. All concepts are mapped to concepts recognised by the OMOP vocabulary, and to OMOP standard concepts whereever possible. Semantic layer uses OMOP defined concept IDs as primary keys\n\n\n2. Fields from OMOP CDM are included as part of OMOP-EXT whereever there is information routinely available to populate them. Fields are used identically to OMOP CDM\n\n\n3. No additional fields are introduced if similar fields or functions already exist in OMOP CDM\n\n\n\nThe resulting SILVER stage is designed to be ‘one transformation step’ away from OMOP GOLD tables, where decisions on patient inclusion and data cleaning are executed.\n\n\n\nOMOP provides different ways for representing provenance. These include using concepts that represent the type of data source, and concepts that represent the concept status. “Type” is USA-centric and does not carry granularity to represent the specific types of NHS system (though NHS systems can be mapped to these categories). Concept status is specific to the context in which each condition code was recorded. In practice, this type of metadata is rarely present in NHS source data, and would usually be inferred by the source system.\nIn the Common Data Model, SILVER tables therefore include additional columns to enable visibility over the source table, and NHS source system, and the direct relationship to a row in a source table via a unique source_row_id that is generated at data load. This also enables direct visbility over changes made during transformation.\n\n\n\n[placeholder]",
    "crumbs": [
      "COMMON DATA MODEL",
      "Intro to CDM"
    ]
  }
]